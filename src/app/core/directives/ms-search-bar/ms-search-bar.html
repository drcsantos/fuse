<div flex layout="row" layout-align="start center">
    <label for="ms-search-bar-input">
        <md-button class="ms-search-bar-expander md-icon-button" aria-label="Expand Search Bar"
                   ng-click="MsSearchBar.expand()"
                   ng-if="!MsSearchBar.resultsLoading || MsSearchBar.collapsed">
            <md-icon md-font-icon="icon-magnify" class="icon s24"></md-icon>
        </md-button>
        <div class="ms-search-bar-loader" layout="row" layout-align="center center"
             ng-if="MsSearchBar.resultsLoading && !MsSearchBar.collapsed">
            <md-progress-circular class="md-accent" md-diameter="48" md-mode="indeterminate"></md-progress-circular>
        </div>
    </label>
    <input id="ms-search-bar-input" type="text" placeholder="Search" flex
           ng-model="MsSearchBar.query"
           ng-model-options="MsSearchBar.queryOptions"
           ng-blur="MsSearchBar.collapse()"
           ng-keydown="MsSearchBar.handleKeydown($event)">
    <md-button class="ms-search-bar-collapser md-icon-button" ng-click="MsSearchBar.collapse()"
               aria-label="Collapse Search Bar">
        <md-icon md-font-icon="icon-close" class="icon s24"></md-icon>
    </md-button>

</div>
